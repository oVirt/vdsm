# SPDX-FileCopyrightText: Red Hat, Inc.
# SPDX-License-Identifier: GPL-2.0-or-later

### DO NOT REMOVE THIS COMMENT -- MOM Configuration for VDSM ###

[main]
# The wake up frequency of the main daemon (in seconds)
main-loop-interval: 15

# The data collection interval for host statistics (in seconds)
host-monitor-interval: 15

# The data collection interval for guest statistics (in seconds)
guest-monitor-interval: 15

# The wake up frequency of the guest manager (in seconds).  The guest manager
# sets up monitoring and control for newly-created guests and cleans up after
# deleted guests.
guest-manager-interval: 15

# The interface MOM using to discover active guests and collect guest memory
# statistics. There're two choices for it: libvirt or vdsm.
hypervisor-interface: vdsmjsonrpcclient

# The wake up frequency of the policy engine (in seconds).  During each
# interval the policy engine evaluates the policy and passes the results
# to each enabled controller plugin.
policy-engine-interval: 15

# A comma-separated list of Controller plugins to enable
controllers: Balloon, KSM, CpuTune, IoTune

# Sets the maximum number of statistic samples to keep for the purpose of
# calculating moving averages.
sample-history-length: 10

# Set this to an existing, writable directory to enable plotting.  For each
# invocation of the program a subdirectory momplot-NNN will be created where NNN
# is a sequence number.  Within that directory, tab-delimited data files will be
# created and updated with all data generated by the configured Collectors.
plot-dir:

# Activate the RPC server on the designated port (-1 to disable).  RPC is
# disabled by default until authentication is added to the protocol.
rpc-port: @VDSMRUNDIR@/mom-vdsm.sock

# At startup, load a policy from the given directory.  If empty, no policy is loaded
policy-dir: @CONFDIR@/mom.d

# Configuration of remote VDSM interfaces
[vdsm]
pki-dir=/etc/pki/vdsm
key-file=keys/vdsmkey.pem
cert-file=certs/vdsmcert.pem
ca-cert-file=certs/cacert.pem
host=127.0.0.1
port=54321
request-timeout=10

[logging]
# Set the destination for program log messages.  This can be either 'stdio' or
# a filename.  When the log goes to a file, log rotation will be done
# automatically.
log: @VDSMLOGDIR@/mom.log

# Set the logging verbosity level.  The following levels are supported:
# 5 or debug:     Debugging messages
# 4 or info:      Detailed messages concerning normal program operation
# 3 or warn:      Warning messages (program operation may be impacted)
# 2 or error:     Errors that severely impact program operation
# 1 or critical:  Emergency conditions
# This option can be specified by number or name.
verbosity: info

## The following two variables are used only when logging is directed to a file.
# Set the maximum size of a log file (in bytes) before it is rotated.
max-bytes: 2097152
# Set the maximum number of rotated logs to retain.
backup-count: 5

[host]
# A comma-separated list of Collector plugins to use for Host data collection.
collectors: HostMemory, HostKSM, HostCpu

[guest]
# A comma-separated list of Collector plugins to use for Guest data collection.
collectors: GuestMemoryOptional, GuestBalloonOptional, GuestCpuTune, GuestIoTuneOptional
